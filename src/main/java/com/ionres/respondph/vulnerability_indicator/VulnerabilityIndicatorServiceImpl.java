package com.ionres.respondph.vulnerability_indicator;

import com.ionres.respondph.database.DBConnection;
import com.ionres.respondph.exception.ExceptionFactory;



public class VulnerabilityIndicatorServiceImpl implements VulnerabilityIndicatorService{

    private final VulnerabilityIndicatorDAOService vulnerabilityIndicatorDAOService;


    public VulnerabilityIndicatorServiceImpl(DBConnection dbConnection) {
        this.vulnerabilityIndicatorDAOService = new VulnerabilityIndicatorDAOServiceImpl(dbConnection);

    }

    @Override
    public boolean createVulnerabilityIndicatorScore(VulnerabilityIndicatorScoreModel vism) {

        try {

            boolean flag = vulnerabilityIndicatorDAOService.saveVulnerabilityScores(
                    vism
            );

            if (!flag) {
                throw ExceptionFactory.failedToCreate("Vulnerability Indicator Score");
            }

            return flag;

        } catch (Exception ex) {
            System.out.println("Error : " + ex.getMessage());
            return false;

        }
    }

    @Override
    public VulnerabilityIndicatorScoreModel getData(int householdId) {
        try {
            VulnerabilityIndicatorScoreModel vism = vulnerabilityIndicatorDAOService.getVulnerabilityScoresByHouseholdId(householdId);

            if (vism == null) {
                System.out.println("No data found for household ID: " + householdId);
            }

            return vism;

        } catch (Exception ex) {
            System.out.println("Error fetching data for household ID " + householdId + ": " + ex.getMessage());
            return null;
        }
    }
}
